# Где-то тут прилег и вайпнулся WG сервер по непонятным [для меня] причинам.

Инструкция, по сути, является [этой](https://routerus.com/how-to-install-and-configure-squid-proxy-on-ubuntu-20-04/) статьей.

```bash
apt install squid

systemctl status squid

cp /etc/squid/squid.conf{,.orginal}

nano /etc/squid/squid.conf
```

По умолчанию squid настроен на прослушивание порта 3128 на всех сетевых интерфейсах сервера.
Если вы хотите изменить порт и установить интерфейс прослушивания, найдите строку, начинающуюся с http_port и укажите IP-адрес интерфейса и новый порт. Если интерфейс не указан, Squid будет прослушивать все интерфейсы.

```bash
# Squid normally listens to port 3128
http_port IP_ADDR:PORT
```

Поменяем на 31281

```systemctl restart squid```

Чтобы открыть порты Squid, включите профиль UFW 'Squid':
```ufw allow 'Squid'```

Если Squid работает на другом порту, отличном от порта по умолчанию, например, 8888 вы можете разрешить трафик на этом порту с помощью:
```ufw allow 8888/tcp```.

В нашем случае это так:
```ufw allow 31281/tcp```

Так как эта прокси нужна только под одно короткое дельце, а потом я планирую её погасить, да и на конечном устройстве никакая аутентификация не поддерживается, то... Ищем в файле конфигурации строку http_access deny all и меняем её на http_access allow all.

```systemctl restart squid```

На всякий случай выключить её из автозагрузки:
```systemctl disable squid```

Итого, для подключения нужен ip-адрес и порт, на котором крутится Сквид.

А для того, чтобы его погасить, когда больше не нужен используем:
```systemctl stop squid```
